## Nim游戏

Nim游戏是经典的公平组合游戏(ICG)，对于ICG游戏我们有如下**定义**：

1. 两名选手；
2. 两名选手轮流行动，每一次行动可以在有限合法操作集合中选择一个；
3. 游戏的任何一种可能的局面(position)，合法操作集合只取决于这个局面本身；局面的改变称为“移动”(move)。
4. 若轮到某位选手时，该选手的合法操作集合为空，则这名选手判负。

对于第三条，我们有更进一步的定义Position，我们将Position分为两类：
- P-position：在当前的局面下，先手必败。
- N-position：在当前的局面下，先手必胜。

他们有如下**性质**：
1. 合法操作集合为空的局面是P-position；
2. 可以移动到P-position的局面是N-position；
3. 所有移动都只能到N-position的局面是P-position。
4. 对于一个局面，当且仅当A[1] xor A[2] xor ... xor A[N] = 0时，该局面为P局面。

对于这个结论的**证明**如下：
1. 全0状态为P局面，即A[i]=0，则A[1] xor A[2] xor ... xor A[N] = 0。
2. 从任意一个A[1] xor A[2] xor ... xor A[N] = k != 0的状态可以移动到A[1] xor A[2] xor ... xor A[N] = 0的状态。由于xor计算的特殊性，我们知道一定有一个A[i]最高位与k最高位的1是相同的，那么必然有A[i] xor k < A[i]的，所以我们可以通过改变A[i]的值为A[i]'，使得A[1] xor A[2] xor ... xor A[i]' xor ... xor A[N] = 0。
3. 对于任意一个局面，若A[1] xor A[2] xor ... xor A[N] = 0，则不存在任何一个移动可以使得新的局面A[1] xor A[2] xor ... xor A[N] = 0。由于xor计算的特殊性，我们可以知道，一定是存在偶数个1时该位置的1才会被消除。若只改变一个A[i]，无论如何都会使得1的数量发生变化，从而导致A[1] xor A[2] xor ... xor A[N] != 0。
 
以上三条满足ICG游戏中N,P局面的转移性质，所以该结论的正确性也得到了证明.

**所以当所有A[i]的异或和为0，下一步移动后异或和必不为0，同理非零移动后可以为0**.
### Sprague-Grundy定理

#### "mex"(𝑆) = min{𝑥|𝑥∈𝑁,𝑥∉𝑆}
#### "SG" (𝑠)="mex" (𝑇)

1. 当前状态的SG值s是所有**后继状态的SG值**构成的集合T中不包含的最小的自然数(终止状态的SG值为0).
2. SG值为0的状态为必败态,非0的状态为必胜态(注意这里讨论的问题默认都是无法操作者败).
3. 多个子游戏的和的SG值为各个子游戏SG值的异或和.

## SG函数求不出时，打表找规律，或者直接凭感觉

#### Bash Game
每人最多一次只能取
m个石子,其他规则同Nim Game.
依旧数学归纳…
SG(x)=xmod(m+1)

